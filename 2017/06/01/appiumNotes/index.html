<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Appium 资料摘抄 | tracenote</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="升级Appium版本，借机重读官方文档等, Appium 不建议参考中文文档，中英文文档仔细比对一下就知道原因了，甚至参考中文文档调试半天不通结果一查英文文档api已变。">
<meta property="og:type" content="article">
<meta property="og:title" content="Appium 资料摘抄">
<meta property="og:url" content="http://tracenote.com/2017/06/01/appiumNotes/index.html">
<meta property="og:site_name" content="tracenote">
<meta property="og:description" content="升级Appium版本，借机重读官方文档等, Appium 不建议参考中文文档，中英文文档仔细比对一下就知道原因了，甚至参考中文文档调试半天不通结果一查英文文档api已变。">
<meta property="og:image" content="http://appium.io/slate/images/animation_off.png">
<meta property="og:updated_time" content="2017-06-02T09:12:50.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Appium 资料摘抄">
<meta name="twitter:description" content="升级Appium版本，借机重读官方文档等, Appium 不建议参考中文文档，中英文文档仔细比对一下就知道原因了，甚至参考中文文档调试半天不通结果一查英文文档api已变。">
<meta name="twitter:image" content="http://appium.io/slate/images/animation_off.png">
  
    <link rel="alternate" href="/atom.xml" title="tracenote" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">tracenote</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://tracenote.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-appiumNotes" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/01/appiumNotes/" class="article-date">
  <time datetime="2017-06-01T04:33:36.000Z" itemprop="datePublished">2017-06-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/appium/">appium</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Appium 资料摘抄
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>升级Appium版本，借机重读官方文档等, Appium 不建议参考中文文档，中英文文档仔细比对一下就知道原因了，甚至参考中文文档调试半天不通结果一查英文文档api已变。</p>
<a id="more"></a>
<p><em>(↓↓ 官方tutorial <a href="http://appium.io/slate/en/master/?java#" target="_blank" rel="external">http://appium.io/slate/en/master/?java#</a>)</em></p>
<h4 id="Client-Server-Architecture"><a href="#Client-Server-Architecture" class="headerlink" title="Client/Server Architecture"></a>Client/Server Architecture</h4><p>Appium is at its heart a webserver that exposes a REST API. It receives connections from a client, listens for commands, executes those commands on a mobile device, and responds with an HTTP response representing the result of the command execution. The fact that we have a client/server architecture opens up a lot of possibilities: we can write our test code in any language that has a http client API, but it is easier to use one of the Appium client libraries. We can put the server on a different machine than our tests are running on. We can write test code and rely on a cloud service like Sauce Labs to receive and interpret the commands.  </p>
<h4 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h4><p>Automation is always performed in the context of a session. Clients initiate a session with a server in ways specific to each library, but they all end up sending a POST /session request to the server, with a JSON object called the ‘desired capabilities’ object. At this point the server will start up the automation session and respond with a session ID which is used for sending further commands.  </p>
<p><em>(↓↓ <a href="http://appium.io/slate/en/tutorial/android.html?java#" target="_blank" rel="external">http://appium.io/slate/en/tutorial/android.html?java#</a>)</em></p>
<h4 id="Ending-the-session"><a href="#Ending-the-session" class="headerlink" title="Ending the session"></a>Ending the session</h4><p>Once we’re done with a testing session, it’s very important to cleanly quit. If a session is not terminated properly then appium will consider the session to still be in progress. This blocks all future sessions from working.<br>All the selenium bindings offer a quit method. This should be invoked once the testing session is over.  </p>
<h4 id="uiautomatorviewer"><a href="#uiautomatorviewer" class="headerlink" title="uiautomatorviewer"></a>uiautomatorviewer</h4><p>Ensure that no Android appium sessions are running. Appium uses uiautomator internally and this will prevent uiautomatorviewer from working if they’re both running at the same time.</p>
<h4 id="disabling-animations"><a href="#disabling-animations" class="headerlink" title="disabling animations"></a>disabling animations</h4><p>After that we’re returning to the home page by using back();. The back method will return even though the app hasn’t finished transitioning. I recommend disabling animations under in Dev Settings. This can also be done programmatically.<br><img src="http://appium.io/slate/images/animation_off.png" alt="DevSettings-animation"></p>
<h4 id="wait-for"><a href="#wait-for" class="headerlink" title="wait for"></a>wait for</h4><p>The driver.manage().timeouts() line of Java code requested that appium wait 30 seconds for elements to appear before giving up.</p>
<p><code>driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);</code></p>
<h4 id="Searching-the-Source-Code"><a href="#Searching-the-Source-Code" class="headerlink" title="Searching the Source Code"></a>Searching the Source Code</h4><p>appium is composed of modules. The module related to uiautomator is appium-uiautomator. To find out what happens on Android when we request the page source, search for dumpWindowHierarchy. From there we can tell what uiautomator method appium is using to get the source code.<br>Android is open source and so are the testing tools. This is helpful to identify how methods are implemented. UiDevice.java contains a dumpWindowHierarchy method. The JavaDoc says the data is saved to /data/local/tmp. However upon looking at the actual code, the location is dynamically defined depending on where the device has it’s data directory. Open source is wonderful for quickly understanding the best way to automate on Android.</p>
<hr>
<h4 id="adb-无线连接手机"><a href="#adb-无线连接手机" class="headerlink" title="adb 无线连接手机"></a>adb 无线连接手机</h4><ol>
<li>usb连接手机，<code>adb tcpip 5555</code></li>
<li><code>adb connect 手机IP</code></li>
<li><code>adb devices</code>确认手机已经连上  </li>
</ol>
<ul>
<li>查看手机ip，<code>adb shell netcfg</code>  （ifconfig 不行）  </li>
<li>注意手机电脑同无线网</li>
<li>切回usb连接，<code>adb usb</code></li>
<li>注意无线连接时，adb devices 是获取不到udid的，若是appium程序中指定了设备udid，则会找不到  </li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://tracenote.com/2017/06/01/appiumNotes/" data-id="cj3io325u0006jxfyd7d75iuk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/appium/">appium</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/issue/">issue</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/摘抄/">摘抄</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/06/03/DesignPattern_Singleton/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          设计模式——单例模式
        
      </div>
    </a>
  
  
    <a href="/2017/05/22/appiumAndroidIssues/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Appium Android 坎坷</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/1st/">1st</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DesignPatterns/">DesignPatterns</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/appium/">appium</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/env/">env</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/issue/">issue</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/appium/">appium</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/charles/">charles</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/domain/">domain</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/env/">env</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/issue/">issue</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pay/">pay</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/server/">server</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/云服务器/">云服务器</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/摘抄/">摘抄</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/android/" style="font-size: 16.67px;">android</a> <a href="/tags/appium/" style="font-size: 13.33px;">appium</a> <a href="/tags/charles/" style="font-size: 10px;">charles</a> <a href="/tags/domain/" style="font-size: 10px;">domain</a> <a href="/tags/env/" style="font-size: 20px;">env</a> <a href="/tags/iOS/" style="font-size: 13.33px;">iOS</a> <a href="/tags/issue/" style="font-size: 16.67px;">issue</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/pay/" style="font-size: 10px;">pay</a> <a href="/tags/server/" style="font-size: 13.33px;">server</a> <a href="/tags/云服务器/" style="font-size: 10px;">云服务器</a> <a href="/tags/工具/" style="font-size: 13.33px;">工具</a> <a href="/tags/摘抄/" style="font-size: 10px;">摘抄</a> <a href="/tags/设计模式/" style="font-size: 13.33px;">设计模式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">4</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/06/04/DesignPattern_Template/">设计模式——模板方法模式</a>
          </li>
        
          <li>
            <a href="/2017/06/03/DesignPattern_Singleton/">设计模式——单例模式</a>
          </li>
        
          <li>
            <a href="/2017/06/01/appiumNotes/">Appium 资料摘抄</a>
          </li>
        
          <li>
            <a href="/2017/05/22/appiumAndroidIssues/">Appium Android 坎坷</a>
          </li>
        
          <li>
            <a href="/2017/05/21/payissue/">支付问题</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 tracenote<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>